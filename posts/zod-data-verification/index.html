<!doctype html><html lang=en><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge,chrome=1"><title>Zod | Devies Tech Culture Business Blog</title>
<meta name=viewport content="width=device-width,minimum-scale=1"><meta name=description content="A tool for data verification"><meta name=generator content="Hugo 0.134.1"><meta name=robots content="index, follow"><meta name=author content="Sarosh Nasir"><link rel=stylesheet href=/ananke/css/main.min.dfb339c9c09df5d65cb4e5b942a50588b9488b846f51650aa88f1665d4d3e49f.css><link rel="shortcut icon" href=/favicon.ico type=image/x-icon><link rel=canonical href=https://blog.devies.se/posts/zod-data-verification/><meta property="og:url" content="https://blog.devies.se/posts/zod-data-verification/"><meta property="og:site_name" content="Devies Tech Culture Business Blog"><meta property="og:title" content="Zod"><meta property="og:description" content="A tool for data verification"><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-08-24T14:02:31+02:00"><meta property="article:modified_time" content="2022-08-24T14:02:31+02:00"><meta property="article:tag" content="Typescript"><meta property="article:tag" content="Javascript"><meta property="article:tag" content="Zod"><meta property="article:tag" content="Data"><meta property="article:tag" content="Safety"><meta property="article:tag" content="Verification"><meta itemprop=name content="Zod"><meta itemprop=description content="A tool for data verification"><meta itemprop=datePublished content="2022-08-24T14:02:31+02:00"><meta itemprop=dateModified content="2022-08-24T14:02:31+02:00"><meta itemprop=wordCount content="865"><meta itemprop=keywords content="Typescript,Javascript,Zod,Data,Safety,Verification,Types"><meta name=twitter:card content="summary"><meta name=twitter:title content="Zod"><meta name=twitter:description content="A tool for data verification"><script async src="https://www.googletagmanager.com/gtag/js?id=G-72VEGX2X3B"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-72VEGX2X3B")}</script></head><body class="ma0 avenir bg-near-white production"><header class="cover bg-top" style=background-image:url(https://github.com/colinhacks/zod/raw/master/logo.svg)><div class=bg-black-60><nav class="pv3 ph3 ph4-ns" role=navigation><div class="flex-l justify-between items-center center"><a href=/ class="f3 fw2 hover-white no-underline white-90 dib"><img src=/blog/logo.png class="w100 mw5-ns" alt="Devies Tech Culture Business Blog"></a><div class="flex-l items-center"><div class=ananke-socials><a href=https://www.instagram.com/deviesgbg/ target=_blank rel=noopener class="instagram ananke-social-link link-transition stackoverflow link dib z-999 pt3 pt0-l mr1" title="Instagram link" aria-label="follow on Instagram——Opens in a new window"><span class=icon><svg style="enable-background:new 0 0 67 67" viewBox="0 0 67 67" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M42.271 26.578v-.006c.502.0 1.005.01 1.508-.002.646-.017 1.172-.57 1.172-1.217.0-.963.0-1.927.0-2.89.0-.691-.547-1.24-1.236-1.241-.961.0-1.922-.001-2.883.0-.688.001-1.236.552-1.236 1.243-.001.955-.004 1.91.003 2.865.001.143.028.291.073.426.173.508.639.82 1.209.823C41.344 26.579 41.808 26.578 42.271 26.578zM33 27.817c-3.384-.002-6.135 2.721-6.182 6.089-.049 3.46 2.72 6.201 6.04 6.272 3.454.074 6.248-2.686 6.321-6.043C39.254 30.675 36.462 27.815 33 27.817zM21.046 31.116v.082c0 4.515-.001 9.03.0 13.545.0.649.562 1.208 1.212 1.208 7.16.001 14.319.001 21.479.0.656.0 1.215-.557 1.215-1.212.001-4.509.0-9.02.0-13.528v-.094H42.04c.411 1.313.537 2.651.376 4.014s-.601 2.631-1.316 3.803-1.644 2.145-2.779 2.918c-2.944 2.006-6.821 2.182-9.946.428-1.579-.885-2.819-2.12-3.685-3.713-1.289-2.373-1.495-4.865-.739-7.451C22.983 31.116 22.021 31.116 21.046 31.116zM45.205 49.255c.159-.026.318-.049.475-.083 1.246-.265 2.264-1.304 2.508-2.557.025-.137.045-.273.067-.409V21.794c-.021-.133-.04-.268-.065-.401-.268-1.367-1.396-2.428-2.78-2.618-.058-.007-.113-.02-.17-.03H20.761c-.147.027-.296.047-.441.08-1.352.308-2.352 1.396-2.545 2.766-.008.057-.02.114-.029.171V46.24c.028.154.05.311.085.465.299 1.322 1.427 2.347 2.77 2.52.064.008.13.021.195.03H45.205zM33 64C16.432 64 3 50.569 3 34S16.432 4 33 4s30 13.431 30 30S49.568 64 33 64z" style="fill-rule:evenodd;clip-rule:evenodd"/></svg>
</span><span class=new-window><svg height="8" style="enable-background:new 0 0 1000 1000" viewBox="0 0 1e3 1e3" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M598 128h298v298h-86V274L392 692l-60-60 418-418H598v-86zM810 810V512h86v298c0 46-40 86-86 86H214c-48 0-86-40-86-86V214c0-46 38-86 86-86h298v86H214v596h596z" style="fill-rule:evenodd;clip-rule:evenodd"/></svg>
</span></a><a href=https://www.github.com/deviesdevelopment/ target=_blank rel=noopener class="github ananke-social-link link-transition stackoverflow link dib z-999 pt3 pt0-l mr1" title="GitHub link" aria-label="follow on GitHub——Opens in a new window"><span class=icon><svg style="enable-background:new 0 0 512 512" viewBox="0 0 512 512" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M256 32C132.3 32 32 134.8 32 261.7c0 101.5 64.2 187.5 153.2 217.9 11.2 2.1 15.3-5 15.3-11.1.0-5.5-.2-19.9-.3-39.1-62.3 13.9-75.5-30.8-75.5-30.8-10.2-26.5-24.9-33.6-24.9-33.6-20.3-14.3 1.5-14 1.5-14 22.5 1.6 34.3 23.7 34.3 23.7 20 35.1 52.4 25 65.2 19.1 2-14.8 7.8-25 14.2-30.7-49.7-5.8-102-25.5-102-113.5.0-25.1 8.7-45.6 23-61.6-2.3-5.8-10-29.2 2.2-60.8.0.0 18.8-6.2 61.6 23.5 17.9-5.1 37-7.6 56.1-7.7 19 .1 38.2 2.6 56.1 7.7 42.8-29.7 61.5-23.5 61.5-23.5 12.2 31.6 4.5 55 2.2 60.8 14.3 16.1 23 36.6 23 61.6.0 88.2-52.4 107.6-102.3 113.3 8 7.1 15.2 21.1 15.2 42.5.0 30.7-.3 55.5-.3 63 0 6.1 4 13.3 15.4 11C415.9 449.1 480 363.1 480 261.7 480 134.8 379.7 32 256 32z"/></svg>
</span><span class=new-window><svg height="8" style="enable-background:new 0 0 1000 1000" viewBox="0 0 1e3 1e3" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M598 128h298v298h-86V274L392 692l-60-60 418-418H598v-86zM810 810V512h86v298c0 46-40 86-86 86H214c-48 0-86-40-86-86V214c0-46 38-86 86-86h298v86H214v596h596z" style="fill-rule:evenodd;clip-rule:evenodd"/></svg>
</span></a><a href=https://www.linkedin.com/company/deviesdevelopment target=_blank rel=noopener class="linkedin ananke-social-link link-transition stackoverflow link dib z-999 pt3 pt0-l mr1" title="LinkedIn link" aria-label="follow on LinkedIn——Opens in a new window"><span class=icon><svg style="enable-background:new 0 0 65 65" viewBox="0 0 65 65" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M50.837 48.137V36.425c0-6.275-3.35-9.195-7.816-9.195-3.604.0-5.219 1.983-6.119 3.374V27.71h-6.79c.09 1.917.0 20.427.0 20.427h6.79V36.729c0-.609.044-1.219.224-1.655.49-1.22 1.607-2.483 3.482-2.483 2.458.0 3.44 1.873 3.44 4.618v10.929H50.837zM22.959 24.922c2.367.0 3.842-1.57 3.842-3.531-.044-2.003-1.475-3.528-3.797-3.528s-3.841 1.524-3.841 3.528c0 1.961 1.474 3.531 3.753 3.531H22.959zM34 64C17.432 64 4 50.568 4 34 4 17.431 17.432 4 34 4s30 13.431 30 30c0 16.568-13.432 30-30 30zM26.354 48.137V27.71h-6.789v20.427h6.789z" style="fill-rule:evenodd;clip-rule:evenodd"/></svg>
</span><span class=new-window><svg height="8" style="enable-background:new 0 0 1000 1000" viewBox="0 0 1e3 1e3" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M598 128h298v298h-86V274L392 692l-60-60 418-418H598v-86zM810 810V512h86v298c0 46-40 86-86 86H214c-48 0-86-40-86-86V214c0-46 38-86 86-86h298v86H214v596h596z" style="fill-rule:evenodd;clip-rule:evenodd"/></svg></span></a></div></div></div></nav><div class="tc-l pv6 ph3 ph4-ns"><div class="f2 f1-l fw2 white-90 mb0 lh-title">Zod</div><div class="fw1 f5 f3-l white-80 measure-wide-l center lh-copy mt3 mb4">A tool for data verification</div></div></div></header><main class=pb7 role=main><article class="flex-l flex-wrap justify-between mw8 center ph3"><header class="mt4 w-100"><aside class="instapaper_ignoref b helvetica tracked ttu">Posts</aside><div id=sharing class="mt3 ananke-socials"><a href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https://blog.devies.se/posts/zod-data-verification/&amp;title=Zod" class="ananke-social-link linkedin no-underline" aria-label="share on LinkedIn"><span class=icon><svg style="enable-background:new 0 0 65 65" viewBox="0 0 65 65" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M50.837 48.137V36.425c0-6.275-3.35-9.195-7.816-9.195-3.604.0-5.219 1.983-6.119 3.374V27.71h-6.79c.09 1.917.0 20.427.0 20.427h6.79V36.729c0-.609.044-1.219.224-1.655.49-1.22 1.607-2.483 3.482-2.483 2.458.0 3.44 1.873 3.44 4.618v10.929H50.837zM22.959 24.922c2.367.0 3.842-1.57 3.842-3.531-.044-2.003-1.475-3.528-3.797-3.528s-3.841 1.524-3.841 3.528c0 1.961 1.474 3.531 3.753 3.531H22.959zM34 64C17.432 64 4 50.568 4 34 4 17.431 17.432 4 34 4s30 13.431 30 30c0 16.568-13.432 30-30 30zM26.354 48.137V27.71h-6.789v20.427h6.789z" style="fill-rule:evenodd;clip-rule:evenodd"/></svg></span></a></div><h1 class="f1 athelas mt3 mb1">Zod</h1><p class=tracked>By <strong>Sarosh Nasir</strong></p><time class="f6 mv4 dib tracked" datetime=2022-08-24T14:02:31+02:00>August 24, 2022</time></header><div class="nested-copy-line-height lh-copy serif f4 nested-links mid-gray pr4-l w-two-thirds-l"><p><em><a href=#tldr>tl;dr</a></em></p><p>TypeScript is already a great upgrade from JavaScript if you like types and want to ensure type-safety in your code base.
Zod aids that goal by making sure that incoming data satisfies the purpose it is about to fulfill, among other features of course.</p><img src=https://github.com/colinhacks/zod/raw/master/logo.svg alt="zod logo" height=150px><p>Zod is a TypeScript-first schema declaration and validation library with lots of features that I have yet to use.
However, the basics are very handy and simple to get started with!
For the purpose of introducing Zod, we&rsquo;ll assume that we have a Node.js backend with an endpoint for adding a user to our system.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>addUserEndpoint</span>(<span style=color:#a6e22e>req</span>: <span style=color:#66d9ef>any</span>, <span style=color:#a6e22e>res</span>: <span style=color:#66d9ef>any</span>) {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>user</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>req</span>.<span style=color:#a6e22e>body</span> <span style=color:#66d9ef>as</span> <span style=color:#a6e22e>User</span>;
</span></span><span style=display:flex><span>  <span style=color:#75715e>/* Checks, condictions, etc. */</span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>addUserService</span>(<span style=color:#a6e22e>user</span>);
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>addUserService</span>(<span style=color:#a6e22e>user</span>: <span style=color:#66d9ef>User</span>) {
</span></span><span style=display:flex><span>  <span style=color:#75715e>/* Do something with user */</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>At this point, one might start extracting data from the payload, ex: <code>payload.someField</code>, with or without checking if the value is undefined or null.
While using <code>as User</code> helps dynamically map fields to the <code>User</code> object, some might be undefined or maybe the payload isn&rsquo;t in correct format.
There&rsquo;s lots of things to consider before we can continue with the payload. Instead, let&rsquo;s define a schema and infer a type from that schema.
How will this help? Through the help of Zod and its data validation capabilities!</p><h2 id=data-validation>Data Validation</h2><p>Let&rsquo;s say we have a user system that collects a users name, age and favorite tv shows.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>z</span> } <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#34;zod&#34;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>userSchema</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>z</span>.<span style=color:#66d9ef>object</span>({
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>name</span>: <span style=color:#66d9ef>z.string</span>(),
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>age</span>: <span style=color:#66d9ef>z.number</span>(),
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>favoriteShows</span>: <span style=color:#66d9ef>z.array</span>(<span style=color:#a6e22e>z</span>.<span style=color:#66d9ef>string</span>()),
</span></span><span style=display:flex><span>});
</span></span></code></pre></div><p>The object schema above defines a user in our system.</p><ul><li><code>z.object()</code> says that it&rsquo;s an object</li><li><code>z.string()</code> defines the name as <code>string</code></li><li><code>z.number()</code> defines age as <code>number</code></li><li><code>z.array(z.string())</code> defines favorite tv shows as <code>string[]</code>.</li></ul><p>What now? Well, now we can create a <code>type User</code> and even parse data to see if it fits our schema and therefore our User type.</p><h3 id=parse><code>.parse</code></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#75715e>// Extract the inferred type
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>type</span> <span style=color:#a6e22e>User</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>z</span>.<span style=color:#66d9ef>infer</span>&lt;<span style=color:#f92672>typeof</span> <span style=color:#a6e22e>User</span>&gt;;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Example of incoming data
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>goodFoo</span> <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>name</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;Sarosh&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>age</span>: <span style=color:#66d9ef>29</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>favoriteShows</span><span style=color:#f92672>:</span> [<span style=color:#e6db74>&#34;Stranger Things&#34;</span>, <span style=color:#e6db74>&#34;Brooklyn 99&#34;</span>],
</span></span><span style=display:flex><span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Parsing of incoming data
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>fooUser</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>userSchema</span>.<span style=color:#a6e22e>parse</span>(<span style=color:#a6e22e>foo</span>);
</span></span><span style=display:flex><span><span style=color:#75715e>// { name: &#34;Sarosh&#34;, age: 29, favoriteShows: [&#34;Stranger Things&#34;, &#34;Brooklyn 99&#34;]}
</span></span></span></code></pre></div><p>Luckily for us, the incoming data was valid.
Let&rsquo;s look at an erroneous example.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>badFoo</span> <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>name</span>: <span style=color:#66d9ef>1337</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>age</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;29&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>favoriteShows</span><span style=color:#f92672>:</span> [<span style=color:#e6db74>&#34;Stranger Things&#34;</span>, <span style=color:#e6db74>&#34;Brooklyn 99&#34;</span>],
</span></span><span style=display:flex><span>};
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>badUser</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>userSchema</span>.<span style=color:#a6e22e>parse</span>(<span style=color:#a6e22e>badFoo</span>); <span style=color:#75715e>// throws ZodError
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#75715e>/*
</span></span></span><span style=display:flex><span><span style=color:#75715e>ZodError.issues:
</span></span></span><span style=display:flex><span><span style=color:#75715e>[
</span></span></span><span style=display:flex><span><span style=color:#75715e>  {
</span></span></span><span style=display:flex><span><span style=color:#75715e>    &#34;code&#34;: &#34;invalid_type&#34;,
</span></span></span><span style=display:flex><span><span style=color:#75715e>    &#34;expected&#34;: &#34;string&#34;,
</span></span></span><span style=display:flex><span><span style=color:#75715e>    &#34;received&#34;: &#34;number&#34;,
</span></span></span><span style=display:flex><span><span style=color:#75715e>    &#34;path&#34;: [
</span></span></span><span style=display:flex><span><span style=color:#75715e>      &#34;name&#34;
</span></span></span><span style=display:flex><span><span style=color:#75715e>    ],
</span></span></span><span style=display:flex><span><span style=color:#75715e>    &#34;message&#34;: &#34;Expected string, received number&#34;
</span></span></span><span style=display:flex><span><span style=color:#75715e>  },
</span></span></span><span style=display:flex><span><span style=color:#75715e>  {
</span></span></span><span style=display:flex><span><span style=color:#75715e>    &#34;code&#34;: &#34;invalid_type&#34;,
</span></span></span><span style=display:flex><span><span style=color:#75715e>    &#34;expected&#34;: &#34;number&#34;,
</span></span></span><span style=display:flex><span><span style=color:#75715e>    &#34;received&#34;: &#34;string&#34;,
</span></span></span><span style=display:flex><span><span style=color:#75715e>    &#34;path&#34;: [
</span></span></span><span style=display:flex><span><span style=color:#75715e>      &#34;age&#34;
</span></span></span><span style=display:flex><span><span style=color:#75715e>    ],
</span></span></span><span style=display:flex><span><span style=color:#75715e>    &#34;message&#34;: &#34;Expected number, received string&#34;
</span></span></span><span style=display:flex><span><span style=color:#75715e>  }
</span></span></span><span style=display:flex><span><span style=color:#75715e>]
</span></span></span><span style=display:flex><span><span style=color:#75715e>*/</span>
</span></span></code></pre></div><p>If the data isn&rsquo;t successfully parsed, Zod will throw a ZodError with clear information about what&rsquo;s wrong with the parsed data.
For this case we can simple surround the <code>.parse()</code> call in a <code>try-catch</code>. <code>zodError.issues</code> will list all the errors that Zod found.</p><h3 id=safeparse><code>.safeParse</code></h3><p>For those that don&rsquo;t like that approach, you can use the <code>.safeParse()</code> approach.
<code>safeParse</code> returns an object with information indicating whether the parsing was successful.
If it was successful, then you can extract the data, if not then you can extract the error.
For example, consider our two data objects <code>goodFoo</code> and <code>badFoo</code>.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#a6e22e>userSchema</span>.<span style=color:#a6e22e>safeParse</span>(<span style=color:#a6e22e>goodFoo</span>); <span style=color:#75715e>// =&gt; { success: true, data: {...} }
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#a6e22e>userSchema</span>.<span style=color:#a6e22e>safeParse</span>(<span style=color:#a6e22e>badFoo</span>); <span style=color:#75715e>// =&gt; { success: false, error: ZodError }
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>parsedData</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>userSchema</span>.<span style=color:#a6e22e>safeParse</span>(<span style=color:#a6e22e>data</span>);
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> (<span style=color:#f92672>!</span><span style=color:#a6e22e>parsedData</span>.<span style=color:#a6e22e>success</span> {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>zodError</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>parsedData</span>.<span style=color:#a6e22e>error</span>;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>user</span>: <span style=color:#66d9ef>User</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>parsedData</span>.<span style=color:#a6e22e>data</span>;
</span></span></code></pre></div><p>In this case, we can use a simple <code>if-statement</code> to check if the parse was successful.</p><h2 id=data-requirements>Data Requirements</h2><p>We&rsquo;ve gone through the basics of Zod in regards to schemas and types, as well as how to extract the data.
Now I want to focus on setting requirements for the incoming data.
Let&rsquo;s say that we want to make sure that the name field is not empty, the age is optional and there should be at <strong>most</strong> 3 favorite shows.
All this can be defined in the schema.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>userSchema</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>z</span>.<span style=color:#66d9ef>object</span>({
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>name</span>: <span style=color:#66d9ef>z.string</span>().<span style=color:#a6e22e>min</span>(<span style=color:#ae81ff>1</span>),
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>age</span>: <span style=color:#66d9ef>z.number</span>().<span style=color:#a6e22e>optional</span>(), <span style=color:#75715e>// or z.optional(z.number())
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>favoriteShows</span>: <span style=color:#66d9ef>z.array</span>(<span style=color:#a6e22e>z</span>.<span style=color:#66d9ef>string</span>()).<span style=color:#a6e22e>max</span>(<span style=color:#ae81ff>3</span>),
</span></span><span style=display:flex><span>});
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Want to define an age limit?
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>userSchema</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>z</span>.<span style=color:#66d9ef>object</span>({
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>name</span>: <span style=color:#66d9ef>z.string</span>().<span style=color:#a6e22e>min</span>(<span style=color:#ae81ff>1</span>),
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>age</span>: <span style=color:#66d9ef>z.optional</span>(<span style=color:#a6e22e>z</span>.<span style=color:#66d9ef>number</span>().<span style=color:#a6e22e>gte</span>(<span style=color:#ae81ff>18</span>)),
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>favoriteShows</span>: <span style=color:#66d9ef>z.array</span>(<span style=color:#a6e22e>z</span>.<span style=color:#66d9ef>string</span>()).<span style=color:#a6e22e>max</span>(<span style=color:#ae81ff>3</span>),
</span></span><span style=display:flex><span>});
</span></span></code></pre></div><h1 id=tldr>TL;DR</h1><h3 id=schemas--types>Schemas & Types</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#75715e>// Primitive data types
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>someSchema</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>z</span>.<span style=color:#66d9ef>string</span>();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Objects
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>simpleUserSchema</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>z</span>.<span style=color:#66d9ef>object</span>({
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>name</span>: <span style=color:#66d9ef>z.string</span>(),
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>age</span>: <span style=color:#66d9ef>z.number</span>(),
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>favoriteShows</span>: <span style=color:#66d9ef>z.array</span>(<span style=color:#a6e22e>z</span>.<span style=color:#66d9ef>string</span>()),
</span></span><span style=display:flex><span>});
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Complex objects
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>complexUserSchema</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>z</span>.<span style=color:#66d9ef>object</span>({
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>name</span>: <span style=color:#66d9ef>z.string</span>(),
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>age</span>: <span style=color:#66d9ef>z.number</span>(),
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>address</span>: <span style=color:#66d9ef>z.object</span>({
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>street</span>: <span style=color:#66d9ef>z.string</span>(),
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>zip</span>: <span style=color:#66d9ef>z.number</span>(),
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>city</span>: <span style=color:#66d9ef>z.string</span>(),
</span></span><span style=display:flex><span>  }),
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>favoriteShows</span>: <span style=color:#66d9ef>z.array</span>(<span style=color:#a6e22e>z</span>.<span style=color:#66d9ef>string</span>()),
</span></span><span style=display:flex><span>});
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>type</span> <span style=color:#a6e22e>User</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>z</span>.<span style=color:#66d9ef>infer</span>&lt;<span style=color:#f92672>typeof</span> <span style=color:#a6e22e>mySchema</span>&gt;;
</span></span></code></pre></div><h3 id=method-using-try-catch>Method using <code>try-catch</code></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>z</span>, <span style=color:#a6e22e>ZodError</span> } <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#34;zod&#34;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>userSchema</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>z</span>.<span style=color:#66d9ef>object</span>({
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>name</span>: <span style=color:#66d9ef>z.string</span>(),
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>age</span>: <span style=color:#66d9ef>z.number</span>(),
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>favoriteShows</span>: <span style=color:#66d9ef>z.array</span>(<span style=color:#a6e22e>z</span>.<span style=color:#66d9ef>string</span>()),
</span></span><span style=display:flex><span>});
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>type</span> <span style=color:#a6e22e>User</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>z</span>.<span style=color:#66d9ef>infer</span>&lt;<span style=color:#f92672>typeof</span> <span style=color:#a6e22e>mySchema</span>&gt;;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>var</span> <span style=color:#a6e22e>myObj</span>: <span style=color:#66d9ef>User</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>try</span> {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>myObj</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>userSchema</span>.<span style=color:#a6e22e>parse</span>(<span style=color:#a6e22e>data</span>);
</span></span><span style=display:flex><span>} <span style=color:#66d9ef>catch</span> (<span style=color:#a6e22e>e</span>) {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>e</span> <span style=color:#66d9ef>instanceof</span> <span style=color:#a6e22e>ZodError</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>zodError</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>e</span> <span style=color:#66d9ef>as</span> <span style=color:#a6e22e>ZodError</span>;
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>error</span>(<span style=color:#a6e22e>zodError</span>.<span style=color:#a6e22e>issues</span>);
</span></span><span style=display:flex><span>  } <span style=color:#66d9ef>else</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>error</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>e</span> <span style=color:#66d9ef>as</span> Error;
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>error</span>(<span style=color:#a6e22e>error</span>.<span style=color:#a6e22e>message</span>);
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=method-using-if-statement>Method using <code>if-statement</code></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>z</span>, <span style=color:#a6e22e>ZodError</span> } <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#34;zod&#34;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>userSchema</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>z</span>.<span style=color:#66d9ef>object</span>({
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>name</span>: <span style=color:#66d9ef>z.string</span>(),
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>age</span>: <span style=color:#66d9ef>z.number</span>(),
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>favoriteShows</span>: <span style=color:#66d9ef>z.string</span>().<span style=color:#a6e22e>array</span>(),
</span></span><span style=display:flex><span>});
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>type</span> <span style=color:#a6e22e>User</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>z</span>.<span style=color:#66d9ef>infer</span>&lt;<span style=color:#f92672>typeof</span> <span style=color:#a6e22e>userSchema</span>&gt;;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>parsedData</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>userSchema</span>.<span style=color:#a6e22e>safeParse</span>(<span style=color:#a6e22e>data</span>);
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> (<span style=color:#f92672>!</span><span style=color:#a6e22e>parsedData</span>.<span style=color:#a6e22e>success</span>) {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>zodError</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>parsedData</span>.<span style=color:#a6e22e>error</span>;
</span></span><span style=display:flex><span>  <span style=color:#75715e>/* Error handling */</span>
</span></span><span style=display:flex><span>} <span style=color:#66d9ef>else</span> {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>user</span>: <span style=color:#66d9ef>User</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>parsedData</span>.<span style=color:#a6e22e>data</span>;
</span></span><span style=display:flex><span>  <span style=color:#75715e>/* Continue logic */</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><hr><p>Check the requirements <a href=https://github.com/colinhacks/zod#requirements>here</a> and get started immediately!</p><ul class=pa0><li class="list di"><a href=/tags/typescript/ class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">Typescript</a></li><li class="list di"><a href=/tags/javascript/ class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">Javascript</a></li><li class="list di"><a href=/tags/zod/ class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">Zod</a></li><li class="list di"><a href=/tags/data/ class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">Data</a></li><li class="list di"><a href=/tags/safety/ class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">Safety</a></li><li class="list di"><a href=/tags/verification/ class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">Verification</a></li><li class="list di"><a href=/tags/types/ class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">Types</a></li></ul><div class="mt6 instapaper_ignoref"></div></div><aside class="w-30-l mt6-l"></aside></article></main><footer class="bg-black bottom-0 w-100 pa3" role=contentinfo><div class="flex justify-between"><a class="f4 fw4 hover-white no-underline white-70 dn dib-ns pv2 ph3" href=https://blog.devies.se/>&copy; Devies Tech Culture Business Blog 2024</a><div><div class=ananke-socials><a href=https://www.instagram.com/deviesgbg/ target=_blank rel=noopener class="instagram ananke-social-link link-transition stackoverflow link dib z-999 pt3 pt0-l mr1" title="Instagram link" aria-label="follow on Instagram——Opens in a new window"><span class=icon><svg style="enable-background:new 0 0 67 67" viewBox="0 0 67 67" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M42.271 26.578v-.006c.502.0 1.005.01 1.508-.002.646-.017 1.172-.57 1.172-1.217.0-.963.0-1.927.0-2.89.0-.691-.547-1.24-1.236-1.241-.961.0-1.922-.001-2.883.0-.688.001-1.236.552-1.236 1.243-.001.955-.004 1.91.003 2.865.001.143.028.291.073.426.173.508.639.82 1.209.823C41.344 26.579 41.808 26.578 42.271 26.578zM33 27.817c-3.384-.002-6.135 2.721-6.182 6.089-.049 3.46 2.72 6.201 6.04 6.272 3.454.074 6.248-2.686 6.321-6.043C39.254 30.675 36.462 27.815 33 27.817zM21.046 31.116v.082c0 4.515-.001 9.03.0 13.545.0.649.562 1.208 1.212 1.208 7.16.001 14.319.001 21.479.0.656.0 1.215-.557 1.215-1.212.001-4.509.0-9.02.0-13.528v-.094H42.04c.411 1.313.537 2.651.376 4.014s-.601 2.631-1.316 3.803-1.644 2.145-2.779 2.918c-2.944 2.006-6.821 2.182-9.946.428-1.579-.885-2.819-2.12-3.685-3.713-1.289-2.373-1.495-4.865-.739-7.451C22.983 31.116 22.021 31.116 21.046 31.116zM45.205 49.255c.159-.026.318-.049.475-.083 1.246-.265 2.264-1.304 2.508-2.557.025-.137.045-.273.067-.409V21.794c-.021-.133-.04-.268-.065-.401-.268-1.367-1.396-2.428-2.78-2.618-.058-.007-.113-.02-.17-.03H20.761c-.147.027-.296.047-.441.08-1.352.308-2.352 1.396-2.545 2.766-.008.057-.02.114-.029.171V46.24c.028.154.05.311.085.465.299 1.322 1.427 2.347 2.77 2.52.064.008.13.021.195.03H45.205zM33 64C16.432 64 3 50.569 3 34S16.432 4 33 4s30 13.431 30 30S49.568 64 33 64z" style="fill-rule:evenodd;clip-rule:evenodd"/></svg>
</span><span class=new-window><svg height="8" style="enable-background:new 0 0 1000 1000" viewBox="0 0 1e3 1e3" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M598 128h298v298h-86V274L392 692l-60-60 418-418H598v-86zM810 810V512h86v298c0 46-40 86-86 86H214c-48 0-86-40-86-86V214c0-46 38-86 86-86h298v86H214v596h596z" style="fill-rule:evenodd;clip-rule:evenodd"/></svg>
</span></a><a href=https://www.github.com/deviesdevelopment/ target=_blank rel=noopener class="github ananke-social-link link-transition stackoverflow link dib z-999 pt3 pt0-l mr1" title="GitHub link" aria-label="follow on GitHub——Opens in a new window"><span class=icon><svg style="enable-background:new 0 0 512 512" viewBox="0 0 512 512" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M256 32C132.3 32 32 134.8 32 261.7c0 101.5 64.2 187.5 153.2 217.9 11.2 2.1 15.3-5 15.3-11.1.0-5.5-.2-19.9-.3-39.1-62.3 13.9-75.5-30.8-75.5-30.8-10.2-26.5-24.9-33.6-24.9-33.6-20.3-14.3 1.5-14 1.5-14 22.5 1.6 34.3 23.7 34.3 23.7 20 35.1 52.4 25 65.2 19.1 2-14.8 7.8-25 14.2-30.7-49.7-5.8-102-25.5-102-113.5.0-25.1 8.7-45.6 23-61.6-2.3-5.8-10-29.2 2.2-60.8.0.0 18.8-6.2 61.6 23.5 17.9-5.1 37-7.6 56.1-7.7 19 .1 38.2 2.6 56.1 7.7 42.8-29.7 61.5-23.5 61.5-23.5 12.2 31.6 4.5 55 2.2 60.8 14.3 16.1 23 36.6 23 61.6.0 88.2-52.4 107.6-102.3 113.3 8 7.1 15.2 21.1 15.2 42.5.0 30.7-.3 55.5-.3 63 0 6.1 4 13.3 15.4 11C415.9 449.1 480 363.1 480 261.7 480 134.8 379.7 32 256 32z"/></svg>
</span><span class=new-window><svg height="8" style="enable-background:new 0 0 1000 1000" viewBox="0 0 1e3 1e3" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M598 128h298v298h-86V274L392 692l-60-60 418-418H598v-86zM810 810V512h86v298c0 46-40 86-86 86H214c-48 0-86-40-86-86V214c0-46 38-86 86-86h298v86H214v596h596z" style="fill-rule:evenodd;clip-rule:evenodd"/></svg>
</span></a><a href=https://www.linkedin.com/company/deviesdevelopment target=_blank rel=noopener class="linkedin ananke-social-link link-transition stackoverflow link dib z-999 pt3 pt0-l mr1" title="LinkedIn link" aria-label="follow on LinkedIn——Opens in a new window"><span class=icon><svg style="enable-background:new 0 0 65 65" viewBox="0 0 65 65" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M50.837 48.137V36.425c0-6.275-3.35-9.195-7.816-9.195-3.604.0-5.219 1.983-6.119 3.374V27.71h-6.79c.09 1.917.0 20.427.0 20.427h6.79V36.729c0-.609.044-1.219.224-1.655.49-1.22 1.607-2.483 3.482-2.483 2.458.0 3.44 1.873 3.44 4.618v10.929H50.837zM22.959 24.922c2.367.0 3.842-1.57 3.842-3.531-.044-2.003-1.475-3.528-3.797-3.528s-3.841 1.524-3.841 3.528c0 1.961 1.474 3.531 3.753 3.531H22.959zM34 64C17.432 64 4 50.568 4 34 4 17.431 17.432 4 34 4s30 13.431 30 30c0 16.568-13.432 30-30 30zM26.354 48.137V27.71h-6.789v20.427h6.789z" style="fill-rule:evenodd;clip-rule:evenodd"/></svg>
</span><span class=new-window><svg height="8" style="enable-background:new 0 0 1000 1000" viewBox="0 0 1e3 1e3" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M598 128h298v298h-86V274L392 692l-60-60 418-418H598v-86zM810 810V512h86v298c0 46-40 86-86 86H214c-48 0-86-40-86-86V214c0-46 38-86 86-86h298v86H214v596h596z" style="fill-rule:evenodd;clip-rule:evenodd"/></svg></span></a></div></div></div></footer></body></html>