<!doctype html><html lang=en><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge,chrome=1"><title>How We Chose to Implement Our Design System With Web Components | Devies Tech Culture Business Blog</title>
<meta name=viewport content="width=device-width,minimum-scale=1"><meta name=description content="In case you missed my first post &ldquo;Implementing a design system&rdquo;, we chose to implement our design system with web components. This post will be about our thought process and the tradeoffs we considered when deciding on how we would implement with web components.
It is possible to write a web component using only native JavaScript and HTML, but it is challenging. It is much more common to use a library like Lit or Stencil. The library helps with registration of the web component and change management as well as interoperability with popular frameworks.
In our case, in addition to Lit and Stencil, we also considered Mitosis, and compiling to web components with Solid or Angular."><meta name=generator content="Hugo 0.145.0"><meta name=robots content="index, follow"><meta name=author content="Simon Nielsen"><link rel=stylesheet href=/ananke/css/main.min.4e9ca4c01a14a843da606ff00ca20ce632e6f312233f7b1ed7bb33d8a1cdb60f.css><link rel="shortcut icon" href=/favicon.ico type=image/x-icon><link rel=canonical href=https://blog.devies.se/posts/how-we-chose-to-implement-our-design-system-with-web-components/><meta property="og:url" content="https://blog.devies.se/posts/how-we-chose-to-implement-our-design-system-with-web-components/"><meta property="og:site_name" content="Devies Tech Culture Business Blog"><meta property="og:title" content="How We Chose to Implement Our Design System With Web Components"><meta property="og:description" content="In case you missed my first post “Implementing a design system”, we chose to implement our design system with web components. This post will be about our thought process and the tradeoffs we considered when deciding on how we would implement with web components.
It is possible to write a web component using only native JavaScript and HTML, but it is challenging. It is much more common to use a library like Lit or Stencil. The library helps with registration of the web component and change management as well as interoperability with popular frameworks. In our case, in addition to Lit and Stencil, we also considered Mitosis, and compiling to web components with Solid or Angular."><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2024-09-24T09:08:49+02:00"><meta property="article:modified_time" content="2024-09-24T09:08:49+02:00"><meta property="article:tag" content="Web"><meta property="article:tag" content="Web Components"><meta property="article:tag" content="Accessibility"><meta property="article:tag" content="Design System"><meta property="article:tag" content="Component Library"><meta property="article:tag" content="CSS"><meta itemprop=name content="How We Chose to Implement Our Design System With Web Components"><meta itemprop=description content="In case you missed my first post “Implementing a design system”, we chose to implement our design system with web components. This post will be about our thought process and the tradeoffs we considered when deciding on how we would implement with web components.
It is possible to write a web component using only native JavaScript and HTML, but it is challenging. It is much more common to use a library like Lit or Stencil. The library helps with registration of the web component and change management as well as interoperability with popular frameworks. In our case, in addition to Lit and Stencil, we also considered Mitosis, and compiling to web components with Solid or Angular."><meta itemprop=datePublished content="2024-09-24T09:08:49+02:00"><meta itemprop=dateModified content="2024-09-24T09:08:49+02:00"><meta itemprop=wordCount content="993"><meta itemprop=keywords content="Web,Web Components,Accessibility,Design System,Component Library,CSS,Shadow DOM,Lit,Stencil"><meta name=twitter:card content="summary"><meta name=twitter:title content="How We Chose to Implement Our Design System With Web Components"><meta name=twitter:description content="In case you missed my first post “Implementing a design system”, we chose to implement our design system with web components. This post will be about our thought process and the tradeoffs we considered when deciding on how we would implement with web components.
It is possible to write a web component using only native JavaScript and HTML, but it is challenging. It is much more common to use a library like Lit or Stencil. The library helps with registration of the web component and change management as well as interoperability with popular frameworks. In our case, in addition to Lit and Stencil, we also considered Mitosis, and compiling to web components with Solid or Angular."><script async src="https://www.googletagmanager.com/gtag/js?id=G-72VEGX2X3B"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-72VEGX2X3B")}</script></head><body class="ma0 avenir bg-near-white production"><header><div class=bg-black><nav class="pv3 ph3 ph4-ns" role=navigation><div class="flex-l justify-between items-center center"><a href=/ class="f3 fw2 hover-white no-underline white-90 dib"><img src=/logo.png class="w100 mw5-ns" alt="Devies Tech Culture Business Blog"></a><div class="flex-l items-center"><div class=ananke-socials></div></div></div></nav></div></header><main class=pb7 role=main><article class="flex-l flex-wrap justify-between mw8 center ph3"><header class="mt4 w-100"><aside class="instapaper_ignoref b helvetica tracked ttu">Posts</aside><div id=sharing class="mt3 ananke-socials"></div><h1 class="f1 athelas mt3 mb1">How We Chose to Implement Our Design System With Web Components</h1><p class=tracked><strong>Simon Nielsen</strong></p><time class="f6 mv4 dib tracked" datetime=2024-09-24T09:08:49+02:00>September 24, 2024</time></header><div class="nested-copy-line-height lh-copy serif f4 nested-links mid-gray pr4-l w-two-thirds-l"><p>In case you missed my first post <a href=/posts/implementing-a-design-system-choosing-a-way-forward>&ldquo;Implementing a design system&rdquo;</a>, we chose to implement our design system with web components. This post will be about our thought process and the tradeoffs we considered when deciding on how we would implement with web components.</p><p>It is possible to write a web component using only native JavaScript and HTML, but it is challenging. It is much more common to use a library like Lit or Stencil. The library helps with registration of the web component and change management as well as interoperability with popular frameworks.
In our case, in addition to Lit and Stencil, we also considered Mitosis, and compiling to web components with Solid or Angular.</p><p>But to understand the tradeoffs of using Shadow DOM and the different approaches of Lit and Stencil we first need to go through some basics of web components.</p><h2 id=web-components>Web components</h2><p>Web components or custom elements can be created with or without the use of the Shadow DOM. The Shadow DOM is a tree of elements that is rendered separately from the rest of the DOM (which is sometimes referred to as the light DOM). This means contents of the elements can be scripted and styled without fear of colliding with other things in the document. For example, a CSS selector for all paragraphs outside the Shadow DOM will not affect a paragraph in the Shadow DOM, and vice versa.
Another powerful part of the Shadow DOM are slots. They enable us to slot in content inside the template which is very useful for composable components. Take for example an accordion element where we slot in the title, subtitle and content:</p><pre tabindex=0><code>&lt;mosaik-accordion size=&#34;large&#34;&gt;
  &lt;h2 slot=&#34;title&#34;&gt;Main Title&lt;/h2&gt;
  &lt;p slot=&#34;subtitle&#34;&gt;Sub Title&lt;/p&gt;
  &lt;p&gt; Lorem ipsum dolor sit amet, consectetur adipiscing elit... &lt;/p&gt;
&lt;/mosaik-accordion&gt;
</code></pre><p><img src=/design-system/accordion-component.png alt="Accordion component"></p><h3 id=the-downsides-of-the-shadow-dom>The downsides of the Shadow DOM</h3><p>Since the Shadow DOM is isolated from the rest of the document, elements in the document cannot be connected to elements inside the Shadow DOM within the web component. This is an issue for accessibility reasons if we for example need to connect an input-element inside a web component to a label outside, or if we need an aria-attribute to connect a button to a menu.</p><p>Another issue is with form participation. If a submit button inside the shadow DOM is clicked it will not trigger a form submission. Input elements inside the shadow DOM will not be included in the form in a regular form submission either. You can get around this in different ways but it&rsquo;s not simple. For example when a submit button inside the shadow DOM is clicked you can add a dummy submit button to the light/regular DOM and click that programmatically to trigger a form submission.</p><p>In conclusion, the most important decision is really whether to use the Shadow DOM or not.</p><h3 id=choosing-a-library---lit-vs-stencil>Choosing a library - Lit vs Stencil</h3><p>Lit is just a wrapper around standard web components, removing boilerplate and making it easier to write reactive and declarative code. This means it comes with the same issues and quirks that standard web components have. But it also means that it&rsquo;s simpler than other libraries, there is no compilation magic.</p><p>Stencil on the other hand compiles to web components and framework wrappers. This allows it to add some extra functionality, with Stencil it is possible to use scoped styles and slots without using Shadow DOM. Although scoped styling in this way only means styles inside the components will not leak out, styles from the document can still leak in (which can be both a good and a bad thing).</p><h3 id=deciding>Deciding</h3><p>At first we chose Lit because:</p><ul><li>It seems to be the most popular library for building web components, having double the amount of NPM downloads compared to Stencil at the time</li><li>There are some excellent component libraries built with Lit that can be used for guidance and inspiration, for example Adobe Spectrum and Shoelace</li><li>It is simpler than Stencil, no magic compilation is needed</li></ul><p>But after prototyping with it some more we ran in to more and more issues. Both the issues mentioned above but also regarding integrating it with Angular and React, and developer experience with things like hot module reloading.</p><p>In conclusion, to make development easier and not get stuck in the problems with web components we chose Stencil. We are not a big team so it&rsquo;s important to use something that just works, even though it has some downsides. Also, we didn&rsquo;t miss the irony of using a library/framework to build something framework agnostic.</p><h3 id=mitigating-the-downsides>Mitigating the downsides</h3><p>Since one of the greatest downsides of Stencil is that we get locked into a library that might go obsolete, we&rsquo;re trying to mitigate it by writing the components in a way that it will be easy to switch to something like Lit. For example by controlling as much as we can with pure CSS.</p><p>Switching from Lit to Stencil was pretty easy, at least with a few components. A lot of it is CSS which stays the same and the features and syntax are similar.
The main issue will be accessibility, if we go over to Lit in the future and use the shadow DOM we&rsquo;ll have issues with tying things with IDs in the light DOM etc. But that switch should be possible without breaking the API towards users of the components.</p><h2 id=a-year-later>A year later</h2><p>Stencil is still working well for us and if I could go back in time I would probably choose it again. Although if we had more resources I would probably pick Lit instead because it stays closer to web standards and seems to grow in popularity much quicker than Stencil meaning it will have a larger community.</p><p>But, choosing a library is only the beginning of implementing a design system, there are lots of other decisions to be made. The next post will be about design tokens in a design system and how we implemented them with CSS variables.</p><ul class=pa0><li class="list di"><a href=/tags/web/ class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">Web</a></li><li class="list di"><a href=/tags/web-components/ class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">Web Components</a></li><li class="list di"><a href=/tags/accessibility/ class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">Accessibility</a></li><li class="list di"><a href=/tags/design-system/ class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">Design System</a></li><li class="list di"><a href=/tags/component-library/ class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">Component Library</a></li><li class="list di"><a href=/tags/css/ class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">CSS</a></li><li class="list di"><a href=/tags/shadow-dom/ class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">Shadow DOM</a></li><li class="list di"><a href=/tags/lit/ class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">Lit</a></li><li class="list di"><a href=/tags/stencil/ class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">Stencil</a></li></ul><div class="mt6 instapaper_ignoref"></div></div><aside class="w-30-l mt6-l"><div class="bg-light-gray pa3 nested-list-reset nested-copy-line-height nested-links"><p class="f5 b mb3">Related</p><ul class="pa0 list"><li class=mb2><a href=/posts/implementing-a-design-system-choosing-a-way-forward/>Implementing a design system - Choosing a way forward</a></li></ul></div></aside></article></main><footer class="bg-black bottom-0 w-100 pa3" role=contentinfo><div class="flex justify-between"><a class="f4 fw4 hover-white no-underline white-70 dn dib-ns pv2 ph3" href=https://blog.devies.se/>&copy; Devies Tech Culture Business Blog 2025</a><div><div class=ananke-socials></div></div></div></footer></body></html>